(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{9344:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return a(3033)}])},3033:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var s=a(5893),n=a(6154),l=a(7294),o=a(8094),i=a.n(o),r=a(183),d=a(4566),c=a(1298),_=a(8702),p=a.n(_),h=function(e){let{setMoney:t}=e,{user:a,setUser:o,setAllTransactions:i,allTransactions:r}=(0,d.b)(),[c,_]=(0,l.useState)(a.fake_money),[h,m]=(0,l.useState)(""),[u,b]=(0,l.useState)(""),y=new Date,x=String(y.getDate()).padStart(2,"0"),j=String(y.getMonth()+1).padStart(2,"0"),f=y.getFullYear(),g="".concat(j,"/").concat(x,"/").concat(f),v=()=>{if(u>0){let e=a.fake_money+parseFloat(u);n.Z.post("https://sports-odds.herokuapp.com/update_money",{fake_money:e}).then(a=>{200===a.status&&o(a.data),n.Z.post("https://sports-odds.herokuapp.com/addTransaction",{date:g,transaction_type:"Deposit",transaction_amount:u,money_in_account:e}).then(e=>{200===e.status&&(i(e.data),alert("$".concat(u," has been added to your account!")),b(""),t(!1))})})}},N=()=>{if(h>0&&c>=h){let e=a.fake_money-parseFloat(h);n.Z.post("https://sports-odds.herokuapp.com/update_money",{fake_money:e}).then(a=>{200===a.status&&o(a.data),n.Z.post("https://sports-odds.herokuapp.com/addTransaction",{date:g,transaction_type:"Withdrawal",transaction_amount:h,money_in_account:e}).then(e=>{200===e.status&&(i(e.data),alert("$".concat(h," has been withdrawn from your account!")),m(""),t(!1))})})}};return(0,s.jsxs)("div",{className:p().betting_account,children:[(0,s.jsx)("h1",{children:"Betting Account"}),(0,s.jsxs)("div",{style:{margin:5,paddingLeft:5,paddingRight:5},children:[(0,s.jsx)("label",{htmlFor:"deposit",children:"Deposit:"}),(0,s.jsx)("input",{type:"number",id:"deposit",value:u,onChange:e=>b(e.target.value)}),(0,s.jsx)("button",{onClick:v,children:"Deposit"})]}),(0,s.jsxs)("div",{style:{margin:5,paddingLeft:5,paddingRight:5},children:[(0,s.jsx)("label",{htmlFor:"withdraw",children:"Withdraw:"}),(0,s.jsx)("input",{type:"number",id:"withdraw",value:h,onChange:e=>m(e.target.value)}),(0,s.jsx)("button",{onClick:N,children:"Withdraw"})]})]})},m=function(){let[e,t]=(0,l.useState)(),[a,o]=(0,l.useState)(),[_,p]=(0,l.useState)(),[m,u]=(0,l.useState)(),[b,y]=(0,l.useState)(),[x,j]=(0,l.useState)(!1),[f,g]=(0,l.useState)(!1),[v,N]=(0,l.useState)(!1),{user:k,setUser:w,allBets:C,setAllBets:S,allBetsOutcome:F,setAllBetsOutcome:Z,setAllTransactions:T,allTransactions:I}=(0,d.b)(),B=e=>{if(e){for(let t=0;t<e.length;t++)if(e[t].name===b.teams){let a=e[t].competitions[0].competitors[0],s=e[t].competitions[0].competitors[1];if(!0!==e[t].status.type.completed){alert("This game is not over yet. Please try again later!"),y(""),N(!1);break}let l={money_line:!0===a.winner?a.team.name:s.team.name,point_spread:b.money_line_team===a.team.name?a.score-s.score:s.score-a.score,total_points:parseInt(a.score)+parseInt(s.score)},o={bet_id:b.bet_id};if(b.point_spread&&(b.point_spread.slice(0,b.point_spread.indexOf("(")).trim()===l.point_spread?o.point_spread=!0:o.point_spread=!1),b.total_points){let e=b.total_points.slice(0,b.total_points.indexOf("(")).trim();"O"===e.charAt(0)?e.slice(1)>l.total_points&&(o.total_points=!0):"U"===e.charAt(0)&&e.slice(1)<l.total_points&&(o.total_points=!1)}if(b.money_line_team&&(b.money_line_team===l.money_line?o.money_line=!0:o.money_line=!1),!1!==Object.values(o)?o.payout=!0:o.payout=!1,!0===o.payout){let e=k.fake_money+b.payout;n.Z.post("https://sports-odds.herokuapp.com/update_money",{fake_money:e}).then(t=>{200===t.status&&w(t.data);let a=new Date,s=String(a.getDate()).padStart(2,"0"),l=String(a.getMonth()+1).padStart(2,"0"),o=a.getFullYear(),i="".concat(l,"/").concat(s,"/").concat(o);n.Z.post("https://sports-odds.herokuapp.com/addTransaction",{date:i,transaction_type:"Won bet",transaction_amount:b.payout,money_in_account:e}).then(e=>{200===e.status&&(T(e.data),y(""),N(!1))})})}n.Z.post("https://sports-odds.herokuapp.com/addBetOutcome",o).then(e=>{200===e.status&&n.Z.get("https://sports-odds.herokuapp.com/seeBetsOutcome").then(e=>{200===e.status&&(console.log(e.data),Z(e.data))})});break}}},D=()=>{n.Z.get("https://site.api.espn.com/apis/site/v2/sports/".concat(b.sport,"/").concat(b.league,"/scoreboard?dates=").concat(b.game_date)).then(e=>{B(e.data.events)})},O=e=>{t(e.target.value)},A=e=>{p(e.target.value)},E=e=>{o(e.target.value)},P=e=>{u(e.target.value)},R=()=>{u(""),o(""),t(""),p("")};(0,l.useEffect)(()=>{n.Z.get("https://sports-odds.herokuapp.com/seeBets").then(e=>{200===e.status?(S(e.data),n.Z.get("https://sports-odds.herokuapp.com/seeBetsOutcome").then(e=>{200===e.status&&(Z(e.data),n.Z.get("https://sports-odds.herokuapp.com/getTransaction").then(e=>{200===e.status&&T(e.data)}))})):console.log("Did not work as planned")})},[]);let $=async s=>{s.preventDefault();try{""===_&&p(k.username),""===e&&t(k.f_name),""===a&&o(k.l_name),""===m&&u(k.password),await n.Z.post("https://sports-odds.herokuapp.com/update_info",{username:_,password:m,firstName:e,lastName:a}).then(e=>{200===e.status?(w(e.data),j(!x)):setError("Invalid username or password!")})}catch(e){console.log(e)}R()};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Z,{}),(0,s.jsxs)("div",{className:i().profile_container,children:[(0,s.jsx)("div",{className:i().profile_header,children:k?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:i().profile_title,children:[(0,s.jsx)("h1",{children:"Profile"}),(0,s.jsx)("h5",{style:{color:"#0047AB",cursor:"pointer"},onClick:()=>j(!x),children:"Edit?"})]}),(0,s.jsx)("h2",{children:k.username}),(0,s.jsxs)("h3",{children:[k.f_name," ",k.l_name]}),(0,s.jsxs)("h3",{children:["Fake Money: $",k.fake_money]}),(0,s.jsx)("h4",{style:{color:"#0047AB",cursor:"pointer"},onClick:()=>g(!f),children:"Deposit/Withdraw"}),f?(0,s.jsx)(h,{setMoney:g}):null]}):null}),x?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:i().profile_body,children:(0,s.jsxs)("form",{onSubmit:$,children:[(0,s.jsx)("h2",{children:"Account Information"}),(0,s.jsx)("label",{htmlFor:"firstname",children:"First Name:"}),(0,s.jsx)("input",{type:"text",id:"firstname",value:e,onChange:O}),(0,s.jsx)("label",{htmlFor:"lastname",children:"Last Name:"}),(0,s.jsx)("input",{type:"text",id:"lastname",value:a,onChange:E}),(0,s.jsx)("label",{htmlFor:"password",children:"Password:"}),(0,s.jsx)("input",{type:"password",id:"password",value:m,onChange:P}),(0,s.jsx)("label",{htmlFor:"username",children:"Username:"}),(0,s.jsx)("input",{type:"text",id:"username",value:_,onChange:A}),(0,s.jsx)("button",{type:"submit",children:"Save Changes"})]})})}):null,v?(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:i().findGame,onClick:()=>{D()},children:"Find Results"})}):null,C?(0,s.jsxs)("div",{className:i().table_div,children:[(0,s.jsx)("h2",{style:{paddingTop:20},children:"Your Bets"}),(0,s.jsxs)("table",{className:i().bet_table,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:i().bet_table_header,children:"Teams"}),(0,s.jsx)("th",{className:i().bet_table_header,children:"Point Spread"}),(0,s.jsx)("th",{className:i().bet_table_header,children:"Total Points"}),(0,s.jsx)("th",{className:i().bet_table_header,children:"Money Line"}),(0,s.jsx)("th",{className:i().bet_table_header,children:"Bet Amount"}),(0,s.jsx)("th",{className:i().bet_table_header,children:"Payout"})]})}),(0,s.jsx)("tbody",{children:C.map((e,t)=>{var a,n,l,o;return(0,s.jsxs)("tr",{onClick:()=>{F[t]||(b?(y(""),N(!1)):(y(e),N(!0)))},className:i().bet_table_row,style:{backgroundColor:b&&b.bet_id===e.bet_id?"#424242":null},children:[(0,s.jsx)("td",{className:i().bet_table_cell,children:e.teams}),(0,s.jsx)("td",{className:i().bet_table_cell,children:(null===(a=F[t])||void 0===a?void 0:a.point_spread)?(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,s.jsx)(c.mny,{style:{marginRight:10},color:"green"}),e.point_spread]}):(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:e.point_spread})}),(0,s.jsx)("td",{className:i().bet_table_cell,children:(null===(n=F[t])||void 0===n?void 0:n.total_points)?(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,s.jsx)(c.mny,{style:{marginRight:10},color:"green"}),e.total_points]}):(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:e.total_points})}),(0,s.jsx)("td",{className:i().bet_table_cell,children:(null===(l=F[t])||void 0===l?void 0:l.money_line)?(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,s.jsx)(c.mny,{style:{marginRight:10},color:"green"}),e.money_line," ",e.money_line_team]}):(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[e.money_line," ",e.money_line_team]})}),(0,s.jsxs)("td",{className:i().bet_table_cell,children:["$",e.bet_amount]}),(0,s.jsx)("td",{className:i().bet_table_cell,children:(null===(o=F[t])||void 0===o?void 0:o.payout)?(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,s.jsx)(c.mny,{style:{marginRight:10},color:"green"}),"$",e.payout]}):(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:["$",e.payout]})})]},e.bet_id)})})]})]}):null,I?(0,s.jsxs)("div",{className:i().table_div,children:[(0,s.jsx)("h2",{style:{paddingTop:20},children:"Transaction History"}),(0,s.jsxs)("table",{className:i().transaction_table,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:i().bet_table_header,children:"Date"}),(0,s.jsx)("th",{className:i().bet_table_header,children:"Type"}),(0,s.jsx)("th",{className:i().bet_table_header,children:"Amount"}),(0,s.jsx)("th",{className:i().bet_table_header,children:"Balance"})]})}),(0,s.jsx)("tbody",{children:I.map(e=>(0,s.jsxs)("tr",{className:i().bet_table_row,children:[(0,s.jsx)("td",{className:i().bet_table_cell,children:e.date}),(0,s.jsx)("td",{className:i().bet_table_cell,children:e.transaction_type}),(0,s.jsx)("td",{className:i().bet_table_cell,children:e.transaction_amount}),(0,s.jsxs)("td",{className:i().bet_table_cell,children:["$",e.money_in_account]})]},e.transaction_id))})]})]}):null]})]})}},8702:function(e){e.exports={betting_account:"money_change_betting_account__vAHRm"}},8094:function(e){e.exports={profile_container:"profile_profile_container__aT3XU",profile_header:"profile_profile_header__Eiykh",profile_title:"profile_profile_title__fHYd4",profile_body:"profile_profile_body__ti6lI",bet_table:"profile_bet_table___nxZQ",transaction_table:"profile_transaction_table__ylOik",bet_table_header:"profile_bet_table_header__Fnrqz",bet_table_cell:"profile_bet_table_cell__ffSBH",bet_table_row:"profile_bet_table_row__CQhv_",findGame:"profile_findGame__FG_7u",table_div:"profile_table_div__ZMavS"}}},function(e){e.O(0,[423,470,202,774,888,179],function(){return e(e.s=9344)}),_N_E=e.O()}]);